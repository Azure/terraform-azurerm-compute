# Build matrix / environment variable are explained on:
# http://about.travis-ci.org/docs/user/build-configuration/
# This file can be validated on:
# http://lint.travis-ci.org/
dist: trusty
sudo: required
language: ruby
rvm:
  - 2.3
env:
  - TERRAFORM_VERSION=0.10.8
matrix:
  include:
    - os: linux
      env: TERRAFORM_OS_ARCH=linux_amd64 TERRAFORM_CHECK_SUM=b786c0cf936e24145fad632efd0fe48c831558cc9e43c071fffd93f35e3150db
    - os: osx
      env: TERRAFORM_OS_ARCH=darwin_amd64 TERRAFORM_CHECK_SUM=3f05acdf0a9e04ba7e3bda18521feb0b310462dcce62c454854a40519b1695ed
before_install:
  - gem update --system
  - gem --version
  - curl --output terraform.zip https://releases.hashicorp.com/terraform/$TERRAFORM_VERSION/terraform_$TERRAFORM_VERSION_$TERRAFORM_OS_ARCH.zip
  - echo $TERRAFORM_CHECK_SUM terraform.zip | sha256sum -c
  - unzip terraform.zip
  - sudo mkdir /usr/local/terraform
  - sudo mv terraform /usr/local/terraform
  - rm -f terraform && rm -f terraform_hash && rm -f terraform.zip
  - export PATH="/usr/local/terraform":$PATH
install:
  - bundle install
script:
  - rake build
